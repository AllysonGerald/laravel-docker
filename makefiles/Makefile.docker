##@ ğŸ³ Docker Compose

up: ## Inicia os containers em background
	@echo "$(GREEN)ğŸš€ Iniciando containers...$(NC)"
	docker compose up -d

up-build: ## Rebuild e inicia os containers
	@echo "$(GREEN)ğŸ”¨ Rebuilding e iniciando containers...$(NC)"
	docker compose up -d --build

down: ## Para e remove os containers
	@echo "$(RED)ğŸ›‘ Parando containers...$(NC)"
	docker compose down

down-volumes: ## Para containers e remove volumes (âš ï¸ APAGA DADOS!)
	@echo "$(RED)âš ï¸  ATENÃ‡ÃƒO: Isso vai apagar todos os dados!$(NC)"
	@read -p "Tem certeza? [s/N]: " confirm; \
	if [ "$$confirm" = "s" ] || [ "$$confirm" = "S" ]; then \
		docker compose down -v; \
	else \
		echo "Cancelado."; \
	fi

restart: ## Reinicia todos os containers
	@echo "$(YELLOW)ğŸ”„ Reiniciando containers...$(NC)"
	docker compose restart

restart-php: ## Reinicia apenas o container PHP
	@echo "$(YELLOW)ğŸ”„ Reiniciando PHP...$(NC)"
	docker compose restart php

restart-nginx: ## Reinicia apenas o container Nginx
	@echo "$(YELLOW)ğŸ”„ Reiniciando Nginx...$(NC)"
	docker compose restart nginx

restart-mysql: ## Reinicia apenas o container MySQL
	@echo "$(YELLOW)ğŸ”„ Reiniciando MySQL...$(NC)"
	docker compose restart mysql

restart-redis: ## Reinicia apenas o container Redis
	@echo "$(YELLOW)ğŸ”„ Reiniciando Redis...$(NC)"
	docker compose restart redis

restart-postgres: ## Reinicia apenas o container PostgreSQL
	@echo "$(YELLOW)ğŸ”„ Reiniciando PostgreSQL...$(NC)"
	docker compose restart postgres

restart-mongodb: ## Reinicia apenas o container MongoDB
	@echo "$(YELLOW)ğŸ”„ Reiniciando MongoDB...$(NC)"
	docker compose restart mongodb

ps: ## Lista status dos containers
	docker compose ps

logs: ## Mostra logs de todos os containers
	docker compose logs -f

logs-php: ## Mostra logs do container PHP
	docker compose logs -f php

logs-nginx: ## Mostra logs do container Nginx
	docker compose logs -f nginx

logs-mysql: ## Mostra logs do container MySQL
	docker compose logs -f mysql

logs-redis: ## Mostra logs do container Redis
	docker compose logs -f redis

logs-postgres: ## Mostra logs do container PostgreSQL
	docker compose logs -f postgres

logs-mongodb: ## Mostra logs do container MongoDB
	docker compose logs -f mongodb


##@ ğŸ’» Acesso aos Containers

bash: ## Acessa bash do container PHP
	docker compose exec php bash

bash-nginx: ## Acessa bash do container Nginx
	docker compose exec nginx sh

bash-mysql: ## Acessa bash do container MySQL
	docker compose exec mysql bash

bash-redis: ## Acessa bash do container Redis
	docker compose exec redis sh

bash-postgres: ## Acessa bash do container PostgreSQL
	docker compose exec postgres sh

bash-mongodb: ## Acessa bash do container MongoDB
	docker compose exec mongodb bash

db: ## Conecta ao MySQL (root)
	docker compose exec mysql mysql -u root -proot

db-dev: ## Conecta ao MySQL (developer)
	docker compose exec mysql mysql -u developer -p123456 db_laravel

psql: ## Conecta ao PostgreSQL
	docker compose exec postgres psql -U developer -d db_laravel

mongo: ## Conecta ao MongoDB
	docker compose exec mongodb mongosh -u developer -p 123456 --authenticationDatabase admin

redis-cli: ## Acessa Redis CLI
	docker compose exec redis redis-cli

